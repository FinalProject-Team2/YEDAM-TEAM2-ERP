<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <meta charset="UTF-8">

  <!-- Toast UI Grid -->
  <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
  <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>

  <title>salyLedg</title>

  <style>
    .saly-tab-wrapper {
      margin-bottom: 0;
    }

    .saly-tab-wrapper .nav-tabs {
      display: flex;
      gap: 0;
      margin-bottom: 0;
      border-bottom: none !important;
    }

    .saly-tab-wrapper .nav-item {
      margin-bottom: -1px;
    }

    .saly-tab-wrapper .nav-link {
      border-radius: 10px 10px 0 0;
      padding: 8px 20px;
      background-color: #f7f8fa;
      color: #a1a6ad;
      font-weight: 500;
      border: 1px solid #d1d5db;
      border-bottom-color: #d1d5db;
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.03);
      transition: background-color 0.15s ease,
                  color 0.15s ease,
                  box-shadow 0.15s ease;
    }

    .saly-tab-wrapper .nav-item + .nav-item .nav-link {
      margin-left: -1px;
    }

    .saly-tab-wrapper .nav-link:not(.active):hover {
      background-color: #eff1f4;
      color: #7a7f87;
    }

    .saly-tab-wrapper .nav-link.active {
      background-color: #ffffff;
      color: #111111;
      font-weight: 600;
      border-color: #d1d5db;
      border-bottom-color: #ffffff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      z-index: 2;
    }

    .saly-card-body > .mt-2 {
      margin-top: 0 !important;
    }
  </style>
</head>
<body layout:fragment="content">
<div class="row">
  <!-- 검색조건 -->
  <div class="col-md-12">
    <div class="card mb-3">
      <div class="card-header">
        <h5 class="card-title">검색조건</h5>
        <div class="card-header-right">
          <button class="btn btn-outline-dark" id="btnSearch">조회</button>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <!-- 3 / 3 / 6 배치 -->
          <div class="col-md-3">
            <label class="form-label">부서명</label>
            <select id="dept" class="form-select">
              <option value="">전체</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label">급여대장명칭</label>
            <input type="text" id="srchSalyNm" class="form-control">
          </div>
          <div class="col-md-6">
            <label class="form-label">지급일자</label>
            <div class="d-flex align-items-center js-date-range">
              <div class="input-group date me-2">
                <input type="text"
                       class="form-control js-date-range-start"
                       id="payDtStart"
                       placeholder="날짜 선택">
                <span class="input-group-text js-date-range-icon-start">
                  <i class="bi bi-calendar"></i>
                </span>
              </div>
              <span class="mx-1 fw-bold fs-5">~</span>
              <div class="input-group date ms-2">
                <input type="text"
                       class="form-control js-date-range-end"
                       id="payDtEnd"
                       placeholder="날짜 선택">
                <span class="input-group-text js-date-range-icon-end">
                  <i class="bi bi-calendar"></i>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 급여목록 -->
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">급여목록</h5>
        <div class="card-header-right d-flex gap-2">
          <button class="btn btn-danger" id="btnSalyDelete">삭제</button>
          <button class="btn btn-outline-dark" id="btnSalyCalc">급여계산</button>
          <button class="btn btn-outline-dark" id="btnSalySpec">명세서 조회</button>
          <button class="btn btn-outline-dark" id="openSalyRegistModal">등록/수정</button>
          <button class="btn btn-outline-dark" id="btnToggleConfirm">확정/취소</button>
        </div>
      </div>
      <div class="card-body saly-card-body">
        <div class="saly-tab-wrapper">
          <ul class="nav nav-tabs" id="salyStatusTabs">
            <li class="nav-item">
              <button class="nav-link active" type="button" data-status="BEFORE_PAY">
                지급전
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" type="button" data-status="PAID">
                지급완료
              </button>
            </li>
          </ul>
        </div>

        <div id="grid" class="mt-2"></div>
      </div>
    </div>
  </div>
</div>

<!-- 모달 include -->
<div th:replace="insa/modal/salyRegistModal :: salyRegistModal"></div>

<script>
  /***********************
   * 0. 공통: 부서 셀렉트 로딩
   ***********************/
  function loadDeptOptions() {
    const searchDept = document.getElementById("dept");
    const modalDept  = document.getElementById("salyDept");

    if (searchDept) {
      searchDept.innerHTML = '<option value="">전체</option>';
    }
    if (modalDept) {
      modalDept.innerHTML = '<option value="">선택</option>';
    }

    fetch('/insa/edc/inputOption')
      .then(res => res.json())
      .then(data => {
        const deptList = data.dept || [];
        deptList.forEach(d => {
          if (searchDept) {
            const opt1 = document.createElement("option");
            opt1.value = d.deptId;
            opt1.textContent = d.deptNm;
            searchDept.appendChild(opt1);
          }
          if (modalDept) {
            const opt2 = document.createElement("option");
            opt2.value = d.deptId;
            opt2.textContent = d.deptNm;
            modalDept.appendChild(opt2);
          }
        });
      })
      .catch(() => {
        alert("부서 목록을 불러오는 중 오류가 발생했습니다.");
      });
  }

  /***********************
   * 1. 메인 그리드 데이터
   ***********************/
  let originalGridData = [];
  let currentTabStatus = "BEFORE_PAY"; // BEFORE_PAY / PAID
  let gridData = [];

  /***************************
   * 2. 메인 급여대장 TUI Grid
   ***************************/
  const grid = new tui.Grid({
    el: document.getElementById("grid"),
    data: gridData,
    bodyHeight: 408,
    scrollX: false,
    scrollY: true,
    rowHeaders: [],
    columns: [
      {
        header: "",
        name: "선택",
        width: 50,
        align: "center",
        formatter: ({ rowKey }) => {
          return `<input type="radio" name="salyLedgRadio" data-row-key="${rowKey}" />`;
        }
      },
      { header: "귀속연월",     name: "revsMmdd",   align: "center" },
      { header: "지급일",       name: "payDt",      align: "center" },
      { header: "급여대장명칭", name: "salyLedgNm" },
      { header: "부서명",       name: "deptNm" },
      { header: "인원수",       name: "rcnt",       align: "right" },
      {
        header: "지급총액",
        name: "ttPayAmt",
        align: "right",
        formatter: ({ value }) => {
          if (value == null || value === "") return "";
          return Number(value).toLocaleString("ko-KR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          });
        }
      },
      {
        header: "상태",
        name: "salyLedgStNm",
        align: "center"
      }
    ]
  });

  /************************
   * 3. DB에서 급여대장 목록 조회
   ************************/
  function loadSalyList() {
    const deptSel = document.getElementById("dept");
    const salyNmInput = document.getElementById("srchSalyNm");
    const payDtStartInput = document.getElementById("payDtStart");
    const payDtEndInput   = document.getElementById("payDtEnd");

    const deptId    = deptSel ? (deptSel.value || "") : "";
    const salyNm    = salyNmInput ? salyNmInput.value.trim() : "";
    const payDtStart = payDtStartInput ? payDtStartInput.value.trim() : "";
    const payDtEnd   = payDtEndInput ? payDtEndInput.value.trim() : "";

    const params = new URLSearchParams();
    if (deptId)    params.append("deptId", deptId);
    if (salyNm)    params.append("salyLedgNm", salyNm);
    if (payDtStart) params.append("payDtStart", payDtStart);
    if (payDtEnd)   params.append("payDtEnd", payDtEnd);

    fetch("/insa/saly/list?" + params.toString())
      .then(res => {
        if (!res.ok) {
          throw new Error("급여대장 목록 조회 실패 (HTTP " + res.status + ")");
        }
        return res.json();
      })
      .then(list => {
        originalGridData = (list || []).map(r => {
          // revsYm: "2025-07" → "2025-07" 그대로 (하이픈 유지)
          let revsMmdd = "";
          if (r.revsYm) {
            revsMmdd = String(r.revsYm);
          }

          // payDt: "2025-10-25" 하이픈 그대로
          let payDtStr = "";
          if (r.payDt) {
            let raw = String(r.payDt);
            if (raw.includes("T")) {
              raw = raw.substring(0, 10);
            }
            payDtStr = raw; // 하이픈 그대로
          }

          return {
            salyLedgId : r.salyLedgId,
            revsMmdd   : revsMmdd,
            payDt      : payDtStr,
            salyLedgNm : r.salyLedgNm,
            deptNm     : r.deptNm,
            rcnt       : r.rcnt,
            salyLedgSt : r.salyLedgSt,              // 코드: sal1/sal2/sal3
            salyLedgStNm: r.salyLedgStNm || "",     // 코드명: 미확정/확정/지급완료
            ttPayAmt   : r.ttPayAmt
          };
        });

        applyTabFilter();
      })
      .catch(err => {
        console.error("급여대장 목록 조회 오류", err);
        alert("급여대장 목록 조회 중 오류가 발생했습니다.");
      });
  }

  document.getElementById("btnSearch")?.addEventListener("click", loadSalyList);

  /*************************
   * 4. 라디오 선택 헬퍼
   *************************/
  function getSelectedRow() {
    const checked = document.querySelector('input[name="salyLedgRadio"]:checked');
    if (!checked) return null;
    const rowKey = Number(checked.dataset.rowKey);
    const row = grid.getRow(rowKey);
    if (!row) return null;
    return { rowKey, row };
  }

  /*************************
   * 5. 탭으로 지급전 / 지급완료 분리
   *************************/
  const statusTabs         = document.querySelectorAll("#salyStatusTabs .nav-link");
  const btnSalyDelete      = document.getElementById("btnSalyDelete");
  const btnSalyCalc        = document.getElementById("btnSalyCalc");
  const btnSalySpec        = document.getElementById("btnSalySpec");
  const btnToggleConfirm   = document.getElementById("btnToggleConfirm");
  const openSalyRegistBtn  = document.getElementById("openSalyRegistModal");

  function applyTabFilter() {
    if (currentTabStatus === "PAID") {
      // sal3 = 지급완료
      gridData = originalGridData.filter(row => row.salyLedgSt === "sal3");
    } else {
      // 지급전: sal1(미확정) + sal2(확정)
      gridData = originalGridData.filter(row => row.salyLedgSt !== "sal3");
    }
    grid.resetData(gridData);

    const isPaidTab = currentTabStatus === "PAID";

    if (btnSalyDelete) {
      btnSalyDelete.style.display = isPaidTab ? "none" : "";
      btnSalyDelete.disabled      = isPaidTab;
    }
    if (btnSalyCalc) {
      btnSalyCalc.style.display   = isPaidTab ? "none" : "";
      btnSalyCalc.disabled        = isPaidTab;
    }
    if (btnToggleConfirm) {
      btnToggleConfirm.style.display = isPaidTab ? "none" : "";
      btnToggleConfirm.disabled      = isPaidTab;
    }
    if (openSalyRegistBtn) {
      openSalyRegistBtn.style.display = isPaidTab ? "none" : "";
      openSalyRegistBtn.disabled      = isPaidTab;
    }
    if (btnSalySpec) {
      btnSalySpec.style.display = "";
      btnSalySpec.disabled      = false;
    }

    updateConfirmButtonLabel();
  }

  statusTabs.forEach(tab => {
    tab.addEventListener("click", function () {
      statusTabs.forEach(t => t.classList.remove("active"));
      this.classList.add("active");
      currentTabStatus = this.dataset.status || "BEFORE_PAY";
      applyTabFilter();
    });
  });

  /*************************
   * 6. 확정/확정취소 토글 버튼
   *************************/
  function updateConfirmButtonLabel() {
    if (!btnToggleConfirm) return;

    const selected = getSelectedRow();
    if (!selected) {
      btnToggleConfirm.textContent = "확정/취소";
      return;
    }

    const { row } = selected;
    const code = row.salyLedgSt;

    if (code === "sal1") {          // 미확정
      btnToggleConfirm.textContent = "확정";
    } else if (code === "sal2") {   // 확정
      btnToggleConfirm.textContent = "확정취소";
    } else if (code === "sal3") {   // 지급완료
      btnToggleConfirm.textContent = "확정";
    }
  }

  if (btnToggleConfirm) {
    btnToggleConfirm.addEventListener("click", () => {
      const selected = getSelectedRow();
      if (!selected) {
        alert("확정/취소할 급여대장을 선택해주세요.");
        return;
      }

      const { rowKey, row } = selected;
      const code = row.salyLedgSt;

      if (code === "sal3") {
        alert("지급완료된 급여대장은 확정 상태를 변경할 수 없습니다.");
        return;
      }

      // sal1(미확정) <-> sal2(확정) 토글
      if (code === "sal1") {
        grid.setValue(rowKey, "salyLedgSt", "sal2");
        grid.setValue(rowKey, "salyLedgStNm", "확정");
      } else if (code === "sal2") {
        grid.setValue(rowKey, "salyLedgSt", "sal1");
        grid.setValue(rowKey, "salyLedgStNm", "미확정");
      }

      updateConfirmButtonLabel();

      // TODO: 실제 DB 업데이트 API(/insa/saly/confirm) 붙이면 여기서 호출
    });
  }

  grid.on("click", ev => {
    const target = ev.target;
    if (target instanceof HTMLElement &&
        target.matches('input[type="radio"][name="salyLedgRadio"]')) {
      updateConfirmButtonLabel();
    }
  });

  /*************************
   * 7. 삭제 버튼 (현재는 프론트 배열 기준)
   *************************/
  if (btnSalyDelete) {
    btnSalyDelete.addEventListener("click", () => {
      const selected = getSelectedRow();
      if (!selected) {
        alert("삭제할 급여대장을 선택해주세요.");
        return;
      }
      const { row } = selected;

      if (!confirm("선택한 급여대장을 삭제하시겠습니까?")) {
        return;
      }

      // TODO: /insa/saly/delete API 연동
      const idx = originalGridData.findIndex(r =>
        r.salyLedgId === row.salyLedgId
      );
      if (idx > -1) {
        originalGridData.splice(idx, 1);
      }

      applyTabFilter();
      alert("삭제되었습니다.");
    });
  }

  /*************************
   * 8. 급여계산 / 명세서 버튼 (추후 구현)
   *************************/
  if (btnSalyCalc) {
    btnSalyCalc.addEventListener("click", () => {
      const selected = getSelectedRow();
      if (!selected) {
        console.log("신규 급여계산 모드");
      } else {
        console.log("선택 급여대장 기준 급여계산/조회:", selected.row);
      }
    });
  }

  if (btnSalySpec) {
    btnSalySpec.addEventListener("click", () => {
      const selected = getSelectedRow();
      if (!selected) {
        alert("명세서를 조회할 급여대장을 선택해주세요.");
        return;
      }
      console.log("명세서 조회:", selected.row);
    });
  }

  /***********************
   * 9. 모달 & 사원 그리드
   ***********************/
  const modal   = document.getElementById("salyRegistModal");
  const back    = document.getElementById("salyRegistBackdrop");
  const btnSalySave = document.getElementById("btnSalySave");
  const btnSalyEmpSearch = document.getElementById("btnSalyEmpSearch");
  const salyEmpNmCond = document.getElementById("salyEmpNmCond");
  const modalDept = document.getElementById("salyDept");

  const grid2El = document.getElementById("grid2");
  let grid2 = null;

  function initEmpGrid() {
    if (!grid2El || grid2) return;
    grid2 = new tui.Grid({
      el: grid2El,
      data: [],
      bodyHeight: 320,
      scrollX: false,
      scrollY: true,
      rowHeaders: ['checkbox'],
      columns: [
        { header: "사원번호", name: "empId" },
        { header: "사원명",   name: "nm" },
        { header: "고용형태", name: "emplymTyNm" },
        { header: "부서명",   name: "deptNm" }
      ]
    });
  }

  function loadEmpList() {
    if (!grid2) return;

    const deptId = modalDept ? (modalDept.value || "") : "";
    const empNm  = salyEmpNmCond ? salyEmpNmCond.value.trim() : "";

    const param = {
      deptId: deptId,
      empNm : empNm
    };

    fetch("/insa/saly/empList", {
      method : "POST",
      headers: { "Content-Type": "application/json" },
      body   : JSON.stringify(param)
    })
    .then(res => res.json())
    .then(list => {
      const data = (list || []).map(e => ({
        empId:      e.empId,
        nm:         e.nm,
        emplymTyNm: e.emplymTyNm || e.emplymTy || "",
        deptNm:     e.deptNm || ""
      }));
      grid2.resetData(data);
    })
    .catch(err => {
      console.error("사원 조회 오류", err);
      alert("사원 목록 조회 중 오류가 발생했습니다.");
    });
  }

  function openSalyModal() {
    if (!modal || !back) return;

    modal.classList.add("show");
    modal.style.display = "block";
    back.style.display  = "block";

    initEmpGrid();
    loadEmpList();

    if (grid2 && grid2.refreshLayout) {
      grid2.refreshLayout();
    }
  }

  function closeSalyRegistModal() {
    if (modal) {
      modal.classList.remove("show");
      modal.style.display = "none";
    }
    if (back) {
      back.style.display = "none";
    }
  }

  if (openSalyRegistBtn) {
    openSalyRegistBtn.addEventListener("click", () => {
      const selected = getSelectedRow();
      if (!selected) {
        console.log("신규 등록 모드");
      } else {
        console.log("선택 급여대장 수정 모드:", selected.row);
        // 수정 모드 바인딩은 나중에
      }
      openSalyModal();
    });
  }

  if (back) {
    back.addEventListener("click", closeSalyRegistModal);
  }
  if (modal) {
    modal.addEventListener("click", function (e) {
      if (!e.target.closest(".modal-content")) {
        closeSalyRegistModal();
      }
    });
  }
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      closeSalyRegistModal();
    }
  });

  // 사원 검색 버튼 + 엔터 + 부서 변경
  btnSalyEmpSearch?.addEventListener("click", loadEmpList);
  salyEmpNmCond?.addEventListener("keydown", e => {
    if (e.key === "Enter") {
      loadEmpList();
    }
  });
  modalDept?.addEventListener("change", loadEmpList);

  /***********************
   * 10. 귀속연월/지급일자 datepicker (기존 그대로)
   ***********************/
  $(function () {
    const $revsYm = $("#revs_ym");
    const $payDt  = $("#payDt");

    if ($revsYm.length) {
      $revsYm.datepicker({
        format: "yyyy-mm",
        autoclose: true,
        minViewMode: 1,
        language: "ko"
      }).on("show", function () {
        const $self  = $(this);
        const $modal = $self.closest(".modal");
        if (!$modal.length) return;

        const modalZ = parseInt($modal.css("z-index"), 10) || 1055;
        setTimeout(function () {
          $(".datepicker-dropdown").each(function () {
            this.style.setProperty("z-index", String(modalZ + 10), "important");
          });
        }, 0);
      });
    }

    if ($payDt.length) {
      $payDt.datepicker({
        format: "yyyy-mm-dd",
        autoclose: true,
        language: "ko"
      }).on("show", function () {
        const $self  = $(this);
        const $modal = $self.closest(".modal");
        if (!$modal.length) return;

        const modalZ = parseInt($modal.css("z-index"), 10) || 1055;
        setTimeout(function () {
          $(".datepicker-dropdown").each(function () {
            this.style.setProperty("z-index", String(modalZ + 10), "important");
          });
        }, 0);
      });
    }

    function ymToFirstDay(ym) {
      if (!ym) return null;
      const m = /^(\d{4})-(\d{2})$/.exec(ym);
      if (!m) return null;
      const y  = parseInt(m[1], 10);
      const mo = parseInt(m[2], 10) - 1;
      const d  = new Date(y, mo, 1);
      if (d.getFullYear() !== y || d.getMonth() !== mo) return null;
      return d;
    }

    function dateToYm(date) {
      if (!date) return "";
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, "0");
      return y + "-" + m;
    }

    function hasDatepicker($el) {
      return !!$el.data("datepicker");
    }

    function syncFromRevsYm() {
      if (!hasDatepicker($payDt)) return;

      const ymStr = $revsYm.val().trim();
      if (!ymStr) {
        $payDt.datepicker("setStartDate", null);
        return;
      }

      const startDate = ymToFirstDay(ymStr);
      if (!startDate) {
        $payDt.datepicker("setStartDate", null);
        return;
      }

      $payDt.datepicker("setStartDate", startDate);

      const curPay = $payDt.datepicker("getDate");
      if (curPay && curPay < startDate) {
        $payDt.datepicker("setDate", startDate);
      }
    }

    function syncFromPayDt() {
      if (!hasDatepicker($revsYm)) return;

      const payDate = $payDt.datepicker("getDate");
      if (!payDate) {
        $revsYm.datepicker("setEndDate", null);
        return;
      }

      const maxYmDate = new Date(payDate.getFullYear(), payDate.getMonth(), 1);
      $revsYm.datepicker("setEndDate", maxYmDate);

      const curYmStr  = $revsYm.val().trim();
      const curYmDate = ymToFirstDay(curYmStr);

      if (curYmDate && curYmDate > maxYmDate) {
        $revsYm.datepicker("setDate", maxYmDate);
        $revsYm.val(dateToYm(maxYmDate));
      }
    }

    $revsYm.on("changeDate", syncFromRevsYm);
    $revsYm.on("blur",       syncFromRevsYm);
    $payDt.on("changeDate",  syncFromPayDt);
    $payDt.on("blur",        syncFromPayDt);
  });

  /***********************
   * 11. 급여대장 저장 (모달 등록/수정)
   ***********************/
  const btnSalySaveEl = document.getElementById("btnSalySave");
  if (btnSalySaveEl) {
    btnSalySaveEl.addEventListener("click", () => {
      const salyNmInput = document.getElementById("salyNm");
      const deptSel     = document.getElementById("salyDept");
      const revsYmInput = document.getElementById("revs_ym");
      const payDtInput  = document.getElementById("payDt");

      const salyNm = salyNmInput ? salyNmInput.value.trim() : "";
      const deptId = deptSel ? (deptSel.value || "") : "";
      const revsYm = revsYmInput ? revsYmInput.value.trim() : "";
      const payDt  = payDtInput ? payDtInput.value.trim() : "";

      if (!salyNm) {
        alert("급여대장명칭을 입력하세요.");
        return;
      }
      if (!deptId) {
        alert("부서를 선택하세요.");
        return;
      }
      if (!revsYm) {
        alert("귀속연월을 선택하세요.");
        return;
      }
      if (!payDt) {
        alert("지급일자를 선택하세요.");
        return;
      }
      if (!grid2) {
        alert("사원 목록 그리드가 초기화되지 않았습니다.");
        return;
      }

      const checkedRows = grid2.getCheckedRows();
      if (!checkedRows || checkedRows.length === 0) {
        alert("급여명세서를 생성할 사원을 한 명 이상 선택하세요.");
        return;
      }

      const empIdList = checkedRows.map(r => r.empId);

      const payload = {
        salyLedgId : null,          // 신규
        salyLedgNm : salyNm,
        deptId     : deptId,
        revsYm     : revsYm,
        payDt      : payDt,
        empIdList  : empIdList
        // salyLedgSt는 서버에서 기본값 sal1 세팅
      };

      fetch("/insa/saly/save", {
        method : "POST",
        headers: { "Content-Type": "application/json" },
        body   : JSON.stringify(payload)
      })
      .then(res => res.json())
      .then(body => {
        if (body.result !== "SUCCESS") {
          const msg = body.message || "저장 중 오류가 발생했습니다.";
          alert(msg);
          return;
        }

        alert("저장되었습니다.");

        loadSalyList();
        closeSalyRegistModal();
      })
      .catch(err => {
        console.error("급여대장 저장 오류", err);
        alert("급여대장 저장 중 오류가 발생했습니다.");
      });
    });
  }

  /***********************
   * 12. 페이지 로드 시 초기작업
   ***********************/
  document.addEventListener("DOMContentLoaded", () => {
    loadDeptOptions();
    loadSalyList();
  });
</script>
</body>
</html>
