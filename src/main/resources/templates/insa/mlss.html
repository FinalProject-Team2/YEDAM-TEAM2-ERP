<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>mlss.html</title>

<style>
.form-select {
	color: #000 !important;
}
/* ì¶”ê°€ CSS */
.readonly-input[readonly] {
	background-color: #e9ecef; /* Bootstrap ê¸°ë³¸ disabled ìƒ‰ìƒ */
	cursor: not-allowed; /* ë§ˆìš°ìŠ¤ ì»¤ì„œë„ ì…ë ¥ ë¶ˆê°€ ëŠë‚Œ */
}

.stIsShow {
	display: none;
}

.menu-item {
	cursor: pointer; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ì†ê°€ë½ ëª¨ì–‘ */
}
</style>
</head>
<body layout:fragment="content">
	<div class="row">
		<div class="col-md-12">
			<div class="card mb-3">
				<!-- ì¹´ë“œ í—¤ë” : ì œëª© + ì´ˆê¸°í™”/ì¡°íšŒ ë²„íŠ¼ -->
				<div class="card-header">
					<div class="card-header-left">
						<h5 class="card-title">í‰ê°€ ì§„í–‰ í˜„í™© ë°•ìŠ¤</h5>
					</div>					
				</div>
				<div class="card-body">

					<div class="row mb-2">
						<div class="col-md-2">
							<label class="form-label">ë³¸ì¸ í‰ê°€ ì™„ë£Œ ì—¬ë¶€</label> <input type="text"
								value="0 / 3" class="form-control" />
						</div>
						<div class="col-md-2">
							<label class="form-label">ìƒì‚¬ í‰ê°€ ì™„ë£Œ ì—¬ë¶€</label> <input type="text"
								value="0 / 2" class="form-control" />
						</div>
						<div class="col-md-2">
							<label class="form-label">ë™ë£Œ í‰ê°€ ì™„ë£Œ ì—¬ë¶€</label> <input type="text"
								value="0 / 5" class="form-control" />
						</div>
						<div class="col-md-6">
								<label for="userName" class="form-label">ê¸°ê°„</label>
								<div class="d-flex align-items-center js-date-range">

										<!-- ì‹œì‘ì¼ -->
										<div class="input-group date">
											<input type="text"
												class="form-control datepicker js-date-range-start"
												placeholder="ì‹œì‘ì¼"> <span
												class="input-group-text js-date-range-icon-start"> <i
												class="bi bi-calendar"></i>
											</span>
										</div>

										<span class="mx-1 fw-bold fs-5">~</span>

										<!-- ì¢…ë£Œì¼ -->
										<div class="input-group date ms-2">
											<input type="text"
												class="form-control datepicker js-date-range-end"
												placeholder="ì¢…ë£Œì¼"> <span
												class="input-group-text js-date-range-icon-end"> <i
												class="bi bi-calendar"></i>
											</span>
										</div>

									</div>
							</div>

					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="row">
		<div class="col-md-2">
			<div class="card">
				<div class="menu-item" onclick="chTitle(this)">
					<i class="fa fa-edit"></i>ë³¸ì¸ í‰ê°€
				</div>
				<div class="menu-item" onclick="chTitle(this)">
					<i class="fa fa-edit"></i>ìƒì‚¬ í‰ê°€
				</div>
				<div class="menu-item" onclick="chTitle(this)">
					<i class="fa fa-edit"></i>ë™ë£Œ í‰ê°€
				</div>
				<div class="menu-item" onclick="chTitle(this)">
					<i class="fa fa-edit"></i>ê²°ê³¼ì§€ í™•ì¸
				</div>
			</div>
		</div>
		<!-- ê²€ìƒ‰ì¡°ê±´ -->
		<div class="col-md-10">
			<!-- ì‚¬ì›ëª©ë¡ -->
			<div id="mlssUser" class="card">
				<!-- ì¹´ë“œ í—¤ë” : ì œëª© + ì´ˆê¸°í™”/ì¡°íšŒ ë²„íŠ¼ -->
				<div class="card-header d-flex justify-content-between align-items-center">
					<div class="card-header-left d-flex align-items-center">
						<!-- collapse í† ê¸€ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½ -->
						<h5 class="card-title mb-0 me-2" id="collapseToggle">ë³¸ì¸í‰ê°€</h5>
						<select th:if="${Session != null and Session == 'testone'}" id="evaleRelate" class="form-select form-select-sm w-auto">
								<option>ê¹€ìƒì‚¬</option>
								<option>ì´ë™ë£Œ</option>
								<option>ë°•ë™ë£Œ2</option>								
							</select>													
					</div>
					<div class="card-header-right">
						<button type="button" class="btn btn-outline-dark">ì„ì‹œì €ì¥</button>
						<button type="button" class="btn btn-outline-dark">ì œì¶œ</button>
					</div>
				</div>
				
					<div class="card-body">
						<div class="row mb-2">
							<div class="col-md-4">
								<label class="form-label">ì´ë¦„</label> <input type="text"
									value="ê¹€ì² ìˆ˜" class="form-control" />
							</div>
							<div class="col-md-4">
								<label class="form-label">ë¶€ì„œ</label> <input type="text"
									value="ì˜ì—…" class="form-control" />
							</div>
							<div class="col-md-4">
								<label class="form-label">ì§ê¸‰</label> <input type="text"
									value="ì‚¬ì›" class="form-control" />
							</div>
						</div>
						<div class="row mb-2">
							
							
						</div>
						<div style="height: 450px; overflow:auto;" >
						<h5 id="yeocRyangGrp" class="card-title">ì—­ëŸ‰ ê·¸ë£¹ë³„ í‰ê°€ í•­ëª©</h5>
						<p>ì§ë¬´ ì—­ëŸ‰</p>
						<div id="toastGrid" style="margin: 20px;"></div>
						<p>í˜‘ì—… ì—­ëŸ‰</p>
						<div id="toastGrid2" style="margin: 20px;"></div>
						<p>ìê¸°ê´€ë¦¬ ì—­ëŸ‰</p>
						<div id="toastGrid3" style="margin: 20px;"></div>
						</div>
					</div>
				
			</div>
			<div id="mlssResult" class="card stIsShow" style="height: 550px; overflow-y:auto; overflow-x:hidden;">
				<div class="row mb-2">
					<div class="col-md-6">
						<div id="radar" style="width: 400px; height: 400px;"></div>
					</div>
					<div class="col-md-6">
						<div id="pie" style="width: 400px; height: 400px;"></div>
					</div>
				</div>
				<div class="row mb-2">
				<div class="col-md-12">
				<div id="toastGrid4" style="margin: 20px;"></div>
				</div>
				</div>
				<div class="row mb-2">
				<div class="col-md-12">
				<div id="column" style="width: 900px; height: 400px;"></div>
				</div>
				</div>


			</div>
		</div>
	</div>
	<script th:inline="javascript">
function chTitle(el) {
	 // div ì•ˆì˜ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (ì•„ì´ì½˜ ì œì™¸)
	const text = $(el).text().trim();

    if (text === "ê²°ê³¼ì§€ í™•ì¸") {
        $("#mlssUser").addClass("stIsShow");
        $("#mlssResult").removeClass("stIsShow");
    } else {
        $("#mlssUser").removeClass("stIsShow");
        $("#mlssResult").addClass("stIsShow");
    }

    // a íƒœê·¸ì˜ í…ìŠ¤íŠ¸ ë³€ê²½
    $("#collapseToggle").text(text);

	// ğŸ“Œ divê°€ í™”ë©´ì— ë³´ì´ëŠ” ìˆœê°„ ì°¨íŠ¸ë¥¼ ìƒì„±
       if (!radarChart) {
           showRadarChart();
       } else {		        	
       	// ğŸ“Œ divê°€ ë³´ì´ëŠ” ìˆœê°„ ì°¨íŠ¸ ìƒì„±
           setTimeout(() => {
               showRadarChart();
           }, 50); // í™”ë©´ ê°±ì‹  í›„ ì‹¤í–‰
           // ğŸ“Œ ì´ë¯¸ ìƒì„±í•œ ì°¨íŠ¸ë¼ë©´ ê°±ì‹ 
           radarChart.resize();   
           pieChart.resize();   
           columnChart.resize();   
       }
	
}

			
let gridColums = [
    { header: 'ID', name: 'mlssIemId', hidden: true },
    { header: 'í‰ê°€ í•­ëª©', name: 'mlssIem', sortable: true },
    {
    	  header: 'ì ìˆ˜',
    	  name: 'score',
    	  align: 'center',
    	  formatter: function (props) {
    		  console.log(props);
    	    const rowKey = props.row._attributes.rowNum; // âœ… êµ¬ë²„ì „ í•µì‹¬

    	    return `
    	      <input type="radio" name="row-${rowKey}" onchange="updateScore(${rowKey},1)">1
    	      <input type="radio" name="row-${rowKey}" onchange="updateScore(${rowKey},2)">2
    	      <input type="radio" name="row-${rowKey}" onchange="updateScore(${rowKey},3)">3
    	      <input type="radio" name="row-${rowKey}" onchange="updateScore(${rowKey},4)">4
    	      <input type="radio" name="row-${rowKey}" onchange="updateScore(${rowKey},5)">5
    	    `;
    	  }
    	}



];
function updateScore(rowKey, value) {
	  grid.setValue(rowKey, 'score', value);
	  console.log(grid.getData()); // ë°”ë¡œ í™•ì¸ìš©
	}




			let grpTag = $("#yeocRyangGrp");
			
			
			
			
			const iemList = [[${iemList}]];
			
			const gridData = [];

			// ì§ë¬´ ì—­ëŸ‰ ë°ì´í„°
		    const jobData = iemList['ì§ë¬´ ì—­ëŸ‰'].map(vo => ({
		    	mlssIemId: vo.mlssIemId,
		        ability: vo.ability,
		        mlssIem: vo.mlssIem
		    }));

		    // í˜‘ì—… ì—­ëŸ‰ ë°ì´í„°
		    const coopData = iemList['í˜‘ì—… ì—­ëŸ‰'].map(vo => ({
		    	mlssIemId: vo.mlssIemId,
		        ability: vo.ability,
		        mlssIem: vo.mlssIem
		    }));

		    // ìê¸°ê´€ë¦¬ ì—­ëŸ‰ ë°ì´í„°
		    const selfData = iemList['ìê¸°ê´€ë¦¬ ì—­ëŸ‰'].map(vo => ({
		    	mlssIemId: vo.mlssIemId,
		        ability: vo.ability,
		        mlssIem: vo.mlssIem
		    }));

			
			const grid = new tui.Grid(
					{
						el : document.getElementById('toastGrid'),
						data : jobData,						
						scrollX : false,
						scrollY : false,
						minBodyHeight : 0,
						autoWidth : true,
						columns : gridColums
					});

			// Grid ìƒì„±
			const grid2 = new tui.Grid(
					{
						el : document.getElementById('toastGrid2'),
						data : coopData,						
						scrollX : false,
						scrollY : false,
						minBodyHeight : 0,
						autoWidth : true,
						columns : gridColums
					});

			

			// Grid ìƒì„±
			const grid3 = new tui.Grid(
					{
						el : document.getElementById('toastGrid3'),
						data : selfData,						
						scrollX : false,
						scrollY : false,
						minBodyHeight : 0,
						autoWidth : true,
						columns : gridColums
					});
			
			let radarChart;   // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
			let pieChart;   // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
			let columnChart;   // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
			let resultGrid;   // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥

			function showRadarChart() {
				const radarEl = document.getElementById('radar');
			    const pieEl = document.getElementById('pie');
			    const columnEl = document.getElementById('column');
			    const gridEl = document.getElementById('toastGrid4');
				
			    if (radarChart) radarChart.destroy(); 
			    
			    if (pieChart) pieChart.destroy(); 
			    
			    if (resultGrid) resultGrid.destroy(); 
			    
			    if (columnChart) columnChart.destroy();
			    
			    radarChart = toastui.Chart.radarChart({
			        el: radarEl,
			        data: {
			            categories: ['í˜', 'ì§€ëŠ¥', 'ìŠ¤í”¼ë“œ'],
			            series: [
			                { name: 'Player', data: [60, 65, 90] },
			                { name: 'ìƒì‚¬', data: [80, 35, 20] },
			                { name: 'ë¶€í•˜', data: [40, 90, 50] },
			            ]
			        },
			        options: {
			            series: { showArea: true }
			        }
			    });
			    pieChart = toastui.Chart.pieChart({
			        el: pieEl,
			        data: {
			            series: [
			                { name: 'ì§„ë‹¨1', data: 60 },
			                { name: 'ì§„ë‹¨2', data: 65 },
			                { name: 'ì§„ë‹¨3', data: 90 }
			            ]
			        },
			        options: {
			            chart: {
			                title: 'Player ëŠ¥ë ¥ ë¹„ìœ¨'
			            }
			        }
			    });
			    
			    columnChart = toastui.Chart.columnChart({
			        el: columnEl,
			        data: {
			        	categories: ['ì—…ë¬´ ì´í•´ë„', 'ì „ë¬¸ì„±', 'ë¬¸ì œ í•´ê²° ëŠ¥ë ¥', 'ì˜ì‚¬ì†Œí†µëŠ¥ë ¥', 'í˜‘ë ¥ íƒœë„', 'ë¬¸ì œí•´ê²° ë° ê¸°ì—¬ë„', 'ì‹œê°„ ë° ì—…ë¬´ê´€ë¦¬', 'ìê¸°ê°œë°œ ë° í•™ìŠµíƒœë„', 'ì±…ì„ê° ë° ê·œìœ¨ ì¤€ìˆ˜'],
			            series: [
			                { name: 'ì§„ë‹¨4', data: [60, 80, 100, 10, 70, 50, 20, 90, 30] },
			                { name: 'ì§„ë‹¨5', data: [60, 80, 100, 10, 70, 50, 20, 90, 30] },
			                { name: 'ì§„ë‹¨6', data: [60, 80, 100, 10, 70, 50, 20, 90, 30] }			                
			            ]
			        },
			        options: {
			            chart: { title: 'Column ì°¨íŠ¸ ì˜ˆì‹œ' },
			            yAxis: { title: 'ì ìˆ˜' },
			            xAxis: { title: 'í•­ëª©' },
			            width: 900,
			            height: 400
			        }			        
			    });
			    
			    const gridData = [ {
					id : 7,
					ability : "ì‹œê°„ ë°  ì—…ë¬´ê´€ë¦¬",
				},  ];

				// Grid ìƒì„±
				resultGrid = new tui.Grid(
						{
							el : gridEl,
							data : gridData,
							scrollX : false,
							scrollY : false,
							minBodyHeight : 0,
							autoWidth : true,
							columns : [{
										header : 'ë‹¤ë©´í‰ê°€ ì—­ëŸ‰ê·¸ë£¹',
										name : 'ability',
										sortable : true
										},
										{
											header : 'ë³¸ì¸',
											name : 'score1',
											align : 'left',												
										},{
											header : 'ìƒì‚¬',
											name : 'score1',
											align : 'left',												
										},{
											header : 'ë™ë£Œ',
											name : 'score1',
											align : 'left',												
										},{
											header : 'ì¡°ì§í‰ê· ',
											name : 'score1',
											align : 'left',												
										},{
											header : 'ì¡°ì§ëŒ€ë¹„',
											name : 'score1',
											align : 'left',												
										},]
						});


			}

		</script>

	<script type="module">
import { bindGridToForm, formToJson } from '/assets/js/teamExportUtil.js';

//ê·¸ë¦¬ë“œ í–‰ í´ë¦­ ì‹œ ìƒì„¸ì •ë³´ ì…ë ¥
grid.on('click', function(ev) {
    const rowData = grid.getRow(ev.rowKey);
    if (!rowData) return;
    
    console.log(rowData );
    console.log(grid.getData() );

    
});


</script>


</body>

</html>