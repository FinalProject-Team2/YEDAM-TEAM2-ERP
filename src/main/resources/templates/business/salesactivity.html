<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>churn_risk_list</title>
<link rel="stylesheet"
	href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
</head>
<style>
.fixed-photo {
	width: 150px; /* 원하는 가로 크기 */
	height: 200px; /* 원하는 세로 크기 */
	object-fit: cover; /* 비율 유지하며 영역에 맞게 채움 */
}

.form-select {
	color: #000 !important;
}
</style>
<body layout:fragment="content">

	<div class="row">
		<div class="col-md-12 mb-3">
			<div class="card">
					<!-- 카드 헤더 : 제목 + 초기화/조회 버튼 -->
					<div class="card-header">
						<div class="card-header-left">
							<h5 class="card-title">조회조건</h5>
						</div>
						<div class="card-header-right">
							<button class="btn btn-dark">초기화</button>
							<button class="btn btn-outline-dark">조회</button>
						</div>
					</div>
						<div class="card-body">
							<div class="row mb-2">
								<div class="col-md-3">
									<label class="form-label">마지막 거래일</label> <input type="text" class="form-control" placeholder="Value">
								</div>
								<div class="col-md-3">
									<label class="form-label">갱신여부</label> <input type="text" class="form-control" placeholder="Value">
								</div>
								<div class="col-md-3">
									<label class="form-label">미갱신기간</label> <input type="text" class="form-control" placeholder="Value">
								</div>
								<div class="col-md-3">
									<label class="form-label">매출변동</label> <input type="text" class="form-control" placeholder="Value">
								</div>
							</div>
							<div class="row mb-2">
								<div class="col-md-3">
									<label class="form-label">최근 웹활동</label> <input type="text" class="form-control" placeholder="Value">
								</div>
								<div class="col-md-3">
									<label class="form-label">평균 구매주기</label> <input type="text" class="form-control" placeholder="Value">
								</div>
								<div class="col-md-3">
									<label class="form-label">평균 구매주기</label> <input type="text" class="form-control" placeholder="Value">
								</div>	
							</div>
						</div>
				</div>
			</div>
		</div>
		
		
		
	<!-- 휴먼고객 -->
	<div class="card mb-3">
		<div class="card-header">
			<div class="card-header-left">
				<h5 class="card-title">휴먼고객목록</h5>
			</div>
			<!-- card-header-left end -->
		<!-- 	<div class="card-header-right">
				<button class="btn btn-dark">초기화</button>
				<button class="btn btn-outline-dark">조회</button>
			</div> //card-header right end -->
		</div> <!-- //card-header wihy-actions end -->
		<div class="card-body">
			<div id="dormancygrid" style="margin: 20px;"></div>
		</div>
	</div>
	
	
	
	<!-- 접촉사항 -->
	<div class="card mb-3">
		<div class="card-header">
			<div class="card-header-left">
				<h5 class="card-title">접촉사항</h5>
			</div>
			<!-- card-header-left end -->
		<!-- 	<div class="card-header-right">
				<button class="btn btn-dark">초기화</button>
				<button class="btn btn-out	line-dark">조회</button>
			</div> //card-header right end -->
		</div> <!-- //card-header wihy-actions end -->
		<div class="card-body">
			<div id="contactgrid" style="margin: 20px;"></div>
		</div>
	</div>
	<script>
		
		// 휴먼/이탈고객 데이터
		tui.Grid.applyTheme('default', {
			cell : {
				normal : { // 일반 셀(본문)
					border : '#ccc',
					background : "#fff",
					showVerticalBorder : true, // 세로 라인 표시
				},
				header : { // 헤더 셀
					border : '#ccc',
					background : '#E3E6ED',
					showVerticalBorder : true,
				},
				editable : { // ★ 편집 가능한 셀 공통 스타일
					background : '#FFFDF0', // 연노랑 같은 색으로 표시
					text : '#000'
				},
				selectedHeader : { // 헤더 클릭했을 때 색
					background : '#E3E6ED' // 헤더랑 똑같이 → 색 안 바뀌는 것처럼 보임
				},
				selected : { // 선택된 셀 색
					background : '#ffffff' // 필요하면 여기도 조정
				}
			}
		});
		const dormancygridData = [ {
			custName: "코드예담",
			dormancyBreakaway: "이탈",
			inactivePeriodDays: "11개월",
			nonRenewalPeriodDays: "6개월",
			revenueChg: "-73%",
			avgPurchaseCycleDays: "2개월",
			churnRiskScore: "100"
		}, {
			custName: "건설예담",
			dormancyBreakaway: "휴면",
			inactivePeriodDays: "8개월",
			nonRenewalPeriodDays: "3개월",
			revenueChg: "-34%",
			avgPurchaseCycleDays: "2개월",
			churnRiskScore: "67"
		} ];
		// Grid 생성
		const dormancygrid = new tui.Grid({
			el : document.getElementById('dormancygrid'),
			data : dormancygridData,
			scrollX : false,
			scrollY : true,
			minBodyHeight : 0,
			autoWidth : true,
			columns : [ {
				header : '업체명',
				name : 'custName',
				sortable : 'true'
			},{
				header : '휴면/이탈',
				name : 'dormancyBreakaway',
				sortable : 'true'
			}, {
				header : '거래중단기간',
				name : 'inactivePeriodDays',
				editor : 'text'
			}, {
				header : '미갱신기간',
				name : 'nonRenewalPeriodDays',
				align : 'center'
			},{
				header : '매출변동',
				name : 'revenueChg',
				align : 'center'
			},{
				header : '평균구매주기',
				name : 'avgPurchaseCycleDays',
				align : 'center'
			}, {
				header : '이탈위험점수',
				name : 'churnRiskScore',
				align : 'center'
			} ]
		});
		
		
		
		// 휴먼/이탈고객 데이터
		tui.Grid.applyTheme('default', {
			cell : {
				normal : { // 일반 셀(본문)
					border : '#ccc',
					background : "#fff",
					showVerticalBorder : true, // 세로 라인 표시
				},
				header : { // 헤더 셀
					border : '#ccc',
					background : '#E3E6ED',
					showVerticalBorder : true,
				},
				editable : { // ★ 편집 가능한 셀 공통 스타일
					background : '#FFFDF0', // 연노랑 같은 색으로 표시
					text : '#000'
				},
				selectedHeader : { // 헤더 클릭했을 때 색
					background : '#E3E6ED' // 헤더랑 똑같이 → 색 안 바뀌는 것처럼 보임
				},
				selected : { // 선택된 셀 색
					background : '#ffffff' // 필요하면 여기도 조정
				}
			}
		});
		
		const contactgridData = [
			{
				contactdate: "2025-11-16",
				managername: "허길동",
				contactchannel: "대면",
				contactdetails: "신규 기능 데모 일정 협의 진행함."
			},
			{
				contactdate: "2025-11-14",
				managername: "허길동",
				contactchannel: "전화",
				contactdetails: "제품 가격과 서비스 범위 관련 안내 진행함."
			},
			{
				contactdate: "2025-11-12",
				managername: "허길동",
				contactchannel: "이메일",
				contactdetails: "요청된 제품 사양서 전달 진행함."
			},
			{
				contactdate: "2025-11-10",
				managername: "허길동",
				contactchannel: "대면",
				contactdetails: "도입 일정과 내부 검토 일정 확인 진행함."
			},
			{
				contactdate: "2025-11-08",
				managername: "허길동",
				contactchannel: "메신저",
				contactdetails: "계약서 초안 관련 의견 공유 및 조정 방향 논의 진행함."
			},
			{
				contactdate: "2025-11-06",
				managername: "허길동",
				contactchannel: "전화",
				contactdetails: "추가 요구사항 세부 확인 진행함."
			},
			{
				contactdate: "2025-11-05",
				managername: "허길동",
				contactchannel: "이메일",
				contactdetails: "수정된 견적서 재전달 진행함."
			},
			{
				contactdate: "2025-11-03",
				managername: "허길동",
				contactchannel: "대면",
				contactdetails: "업무 흐름 파악을 위한 현장 미팅 진행함."
			},
			{
				contactdate: "2025-11-02",
				managername: "허길동",
				contactchannel: "전화",
				contactdetails: "납기 일정 관련 조정 가능 여부 안내 진행함."
			},
			{
				contactdate: "2025-10-31",
				managername: "허길동",
				contactchannel: "메신저",
				contactdetails: "요청 자료 공유 및 추가 문의 응대 진행함."
			},
			{
				contactdate: "2025-10-29",
				managername: "허길동",
				contactchannel: "대면",
				contactdetails: "고객 업무 프로세스 파악을 위한 미팅 진행함."
			},
			{
				contactdate: "2025-10-27",
				managername: "허길동",
				contactchannel: "이메일",
				contactdetails: "고객 문의 목록 정리 후 답변 회신 진행함."
			}
		];

		
		// Grid 생성
		const contactgrid = new tui.Grid({
			el : document.getElementById('contactgrid'),
			data : contactgridData,
			scrollX : false,
			scrollY : true,
			minBodyHeight : 0,
			autoWidth : true,
			columns : [ {
				header : '날짜',
				name : 'contactdate',
				sortable : 'true',
				align : 'center',
				width: 150
			},{
				header : '담당자',
				name : 'managername',
				sortable : 'true',
				align : 'center',
				width: 150
			}, {
				header : '접촉채널',
				name : 'contactchannel',
				editor : 'text',
				align : 'center',
				width: 150
			}, {
				header : '접촉내용',
				name : 'contactdetails',
			}]
		});
	</script>
</body>
</html>

