<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>고객관리</title>


<style>
.lock-account-wrapper .card-title {
	font-weight: 600;
}

/* 공통 카드 헤더 (제목 왼쪽, 버튼 오른쪽) */
.card-header.with-actions {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.card-header-left h5.card-title {
	margin: 0;
	font-size: 1.05rem;
}

.card-header-right .btn+.btn {
	margin-left: .25rem;
}

/* Grid 영역 */
.lock-account-wrapper #accountGrid {
	width: 100%;
	margin-top: 4px;
}

/* 상단 헤더의 체크박스(행 헤더) 셀만 회색 */
.tui-grid-header-area .tui-grid-cell-row-header {
  background-color: #f5f5f5;
}

/* 데이터 행의 체크박스 셀은 흰색 유지 */
.tui-grid-body-area .tui-grid-cell-row-header {
  background-color: #ffffff;
}

/* 그리드 버튼 스타일 */
.grid-btn {
    padding: 4px 10px;
    border: 1px solid #bbb;
    background-color: #fff;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}
.grid-btn:hover {
    background-color: #eee;
}

</style>
</head>

<body layout:fragment="content">
	<div class="lock-account-wrapper">

		<!-- 고객 조회 -->
		<div class="row mb-3">
			<div class="col-md-12">
				<div class="card">

					<!-- 카드 헤더 : 제목 + 초기화/조회 버튼 -->
					<div class="card-header with-actions">
						<div class="card-header-left">
							<h5 class="card-title">조회 조건</h5>
						</div>
						<div class="card-header-right">
							<button type="button" class="btn btn-dark">초기화</button>
							<button type="button" class="btn btn-outline-dark">조회</button>
						</div>
					</div>

					<!-- /card-body start -->
					<div class="card-body">
						<div class="row g-2">
							<div class="col-md-4">
								<label>고객코드</label> <select class="form-select">
									<option>251125-001</option>
									<option>251125-002</option>
								</select>
							</div>
							<div class="col-md-4">
								<label>고객사</label> <select class="form-select">
									<option>무신사</option>
									<option>29cm</option>
								</select>
							</div>
							<div class="col-md-4">
								<label>담당자</label> <select class="form-select">
									<option>논개</option>
									<option>구론산</option>
								</select>
							</div>
						</div>
					</div>
					<!-- /card-body end -->
				</div>
			</div>
		</div>

		<!-- 고객정보목록 카드 -->
		<div class="row">
		
			<!-- 고객정보목록 그리드 -->
			<div class="col-md-6 d-flex">
    			<div class="card w-100 h-100">

					<!-- 카드 헤더 : 제목 + 잠금 해제 버튼 -->
					<div class="card-header with-actions">
						<div class="card-header-left">
							<h5 class="card-title">고객정보</h5>
						</div>

					</div>

					<div class="card-body">
						<div class="priceGridWrap">
							<div id="custGrid"></div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- 신규 등록카드 -->
			<div class="col-md-6 d-flex">
    			<div class="card w-100 h-100">

					<!-- 카드 헤더 : 제목 + 초기화/조회 버튼 -->
					<div class="card-header with-actions">
						<div class="card-header-left">
							<h5 class="card-title">신규등록</h5>
						</div>
						<div class="card-header-right">
							<button type="button" class="btn btn-dark">초기화</button>
							<button type="button" class="btn btn-outline-dark">저장</button>
						</div>
					</div>

					<!-- 신규등록폼 -->
					<div class="card-body d-flex flex-column justify-content-between">
						  <div class="row g-3">
						    <!-- 위쪽 영역 -->
						    <div class="col-4">
						      <label class="form-label">고객코드</label>
						      <input id="priceName" type="text" class="form-control">
						    </div>
						    <div class="col-4">
						      <label class="form-label">고객사</label>
						      <input id="priceName" type="text" class="form-control">
						    </div>
						    <div class="col-4">
						      <label class="form-label">사업자번호</label>
						      <input id="priceName" type="text" class="form-control">
						    </div>
						
						    <!-- 2번째줄 -->
						    <div class="col-md-4">
                                <label for="workplace" class="form-label">사업장주소</label> 
								<input id="workplace" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
							<div class="col-md-4">
                                <label for="phoneNum" class="form-label">연락처</label> 
								<input id="phoneNum" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
							<div class="col-md-4">
                                <label for="faxNum" class="form-label">Fax번호</label> 
								<input id="faxNum" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
						
						    <!-- 3번째줄 -->
						    <div class="col-md-4">
                                <label for="manager" class="form-label">담당자</label> 
								<input id="manager" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
							<div class="col-md-4">
                                <label for="managerNum" class="form-label">담당자연락처</label> 
								<input id="managerNum" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
							<div class="col-md-4">
                                <label for="managerEmail" class="form-label">담당자이메일</label> 
								<input id="managerEmail" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
						
						    <!-- 아래 : 비고 (아래쪽에 붙도록) -->
						    <div class="col-md-6">
                                <label for="exponent" class="form-label">대표자</label> 
								<input id="exponent" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
							<div class="col-md-6">
                                <label for="exponentNum" class="form-label">대표자연락처</label> 
								<input id="exponentNum" type="text" class="form-control" placeholder="YEDAM" align-items-center>
							</div>
						  </div>
					</div> <!-- 신규등록폼 end -->
					
				</div>
			</div><!-- 신규등록 카드 end -->
			
		</div>

	</div>

<script>


	
    // 1. Toast UI Grid 테마
		tui.Grid.applyTheme('default', {
		  cell: {
		    normal: {
		      border: '#dedede',
		      background: '#ffffff',
		      showVerticalBorder: true
		    },
		    header: {
		      border: '#dedede',
		      background: '#f5f5f5',
		      showVerticalBorder: true
		    },
		    // ✅ rowHeader는 기본 흰색으로 두기 (헤더/바디 공통)
		    rowHeader: {
		      border: '#dedede',
		      background: '#ffffff',
		      showVerticalBorder: true
		    },
		    editable: {
		      background: '#FFFDF0',
		      text: '#000'
		    },
		    selectedHeader: {
		      background: '#f5f5f5'
		    },
		    selected: {
		      background: '#ffffff'
		    }
		  }
		}); // 1. 끝



		 // 2. 더미 데이터
	    const custData = [
	        {
	        	custId: '251126-0001',
	        	customer: '무신사',
	        	workplace: '서울특별시 강남구 테헤란로 56 유니빌딩 2301호',
	        	exponent: '홍길동',
	        	brn:'024-11-33333',
	        	manager:'논개',
	        	phoneNum:'02-111-2222',
	        	email:'nongae@musinsa.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	        {
	        	custId: '251126-0002',
	        	customer: '29CM',
	        	workplace: '서울특별시 강남구 테헤란로 100',
	        	exponent: '김수철',
	        	brn:'123-45-67899',
	        	manager:'구론산',
	    	    phoneNum:'02-777-8888',
	    	    email:'san2@29cm.com'
	        },
	    ];

	    // 3. Grid 공통 옵션
	    const saleGridOptions = {
	        bodyHeight: 320,
	        scrollX: true,
	        scrollY: true,
	        rowHeaders: ['rowNum'],     //No 번호
	        columnOptions: {
	            minWidth: 80,
	            resizable: true
	        }
	    };

	    // 4. 계정 목록 Grid 생성
	    const custGrid = new tui.Grid({
	        el: document.getElementById('custGrid'),
	        data: custData,
	        ...saleGridOptions,
	        columns: [
	            { header: '고객코드', name: 'custId', width: 120, align: 'center'},
	            { header: '고객사', name: 'customer', width: 150, align: 'center'},
	            { header: '사업장주소', name: 'workplace', minWidth: 350 },
	            { header: '대표자', name: 'exponent', width: 120, align: 'center' },
	            { header: '사업자번호', name: 'brn', width: 140, align: 'center' },
	            { header: '담당자', name: 'manager', width: 100, align: 'center' },
	            { header: '연락처', name: 'phoneNum', width: 120, align: 'center' },
	            { header: '이메일', name: 'email', width: 200, align: 'center' },
	        ]
	    }); // 4. 끝
    
    
	 // 5. 폼 요소 캐싱
	    const priceForm = {
	      priceName: document.getElementById('priceName'),
	      priceType: document.getElementById('priceType'),
	      percent:   document.getElementById('percent'),
	      beginDt:   document.getElementById('beginDt'),
	      endDt:     document.getElementById('endDt'),
	      rm:        document.getElementById('rm')
	      
	    }; // 5. 끝

    // 6. 행 클릭 시 폼에 데이터 세팅
    	priceGrid.on('click', ev => {
    		
      // 버튼(거래처설정/품목설정) 클릭은 무시
      if (ev.columnName === 'clientSetting' || ev.columnName === 'itemSetting') {
        return;
      }

      const rowKey = ev.rowKey;
      if (rowKey == null) return;

      const row = priceGrid.getRow(rowKey);
      if (!row) return;

      // Grid 데이터 → 폼 매핑
      priceForm.priceName.value = row.priceName || '';
      priceForm.percent.value   = row.percent || '';

      // select 박스는 value 로 지정
      if (row.type) {
        priceForm.priceType.value = row.type;
      } else {
        priceForm.priceType.value = ''; // 필요시 기본값
      }

      priceForm.beginDt.value = row.beginDt || '';
      priceForm.endDt.value   = row.endDt || '';
      priceForm.rm.value      = row.rm || '';
    }); // 6. 끝
    
 // 7. 버튼 클릭 이벤트 처리
 	document.addEventListener('click', (e) => {
	     if (e.target.classList.contains('client-btn')) {
	         const rowKey = priceGrid.getFocusedCell().rowKey;
	         const rowData = priceGrid.getRow(rowKey);
	         alert(`거래처 설정 클릭됨: ${rowData.priceId}`);
	     }
	
	     if (e.target.classList.contains('item-btn')) {
	         const rowKey = priceGrid.getFocusedCell().rowKey;
	         const rowData = priceGrid.getRow(rowKey);
	         alert(`품목 설정 클릭됨: ${rowData.priceId}`);
	     }
      
 	}); // 7. 끝
		
    

</script>

</body>
</html>
